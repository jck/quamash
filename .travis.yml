language: python
python:
  - "3.3"
  - "3.4"
before_install:
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start
  - sudo apt-get install -y libqt4-dev
  # PyQt4
  - curl -L http://sourceforge.net/projects/pyqt/files/sip/sip-4.16.5/sip-4.16.5.tar.gz | tar xz
  - cd sip-4.16.5
  - python configure.py
  - make
  - sudo make install
  - cd ..
  - curl -L http://sourceforge.net/projects/pyqt/files/PyQt4/PyQt-4.11.3/PyQt-x11-gpl-4.11.3.tar.gz | tar xz
  - cd PyQt-x11-gpl-4.11.3
  - python configure.py --confirm-license
  - make
  - sudo make install
  - cd ..
  # PySide
  - pip install --find-links wheelhouse/ pyside
  - python `which pyside_postinstall.py` -install
  # Python 3.3
  - (echo $TRAVIS_PYTHON_VERSION | grep -q '^3.3') && pip install asyncio
script:
  - py.test --qtimpl PyQt4
  #- py.test --qtimpl PyQt5
  - py.test --qtimpl PySide
